import{D as f}from"./DefaultButton-DiOkzSf7.js";import{f as _}from"./fieldValidation-2uvnKSNg.js";import{p as i,g as b,o as p,b as n,t as y,c as g,h as k,w as o,a as r,f as c,s as V,E as u}from"./app-CoPFiJBb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const C={class:"space-y-6 p-5"},Y={class:"border-b pb-4 text-lg font-bold text-gray-900"},v={class:"px-2"},B={class:"flex justify-end space-x-3"},D={props:{propertyModal:{type:Object,default:null}},data(){return{process:!1,loaded:!0,isValid:!1,form:{admission_student_stage:this.propertyModal.data.admission_student_stage,scheduled_at:null},field:{scheduled_at:{label:"Pilih Jadwal",rules:[_.isRequired("Pilih Jadwal")],error:null}}}},methods:{submit(){this.$refs.scheduleForm.validate(d=>{if(d){this.process=!0;let s=JSON.parse(JSON.stringify(this.form));V.post(route("guardian.admissionStudent.setSchedule"),s,{headers:{"Content-Type":"application/json"}}).then(e=>{e.data.status==="success"?(u({title:"Berhasil",message:e.data.message,type:"success"}),setTimeout(()=>{this.close(),this.$inertia.reload()},2e3)):e.data.status==="error"&&u({title:"Error",message:e.data.message,type:"error"})}).catch(e=>{var a,l;if(u({title:"Error",message:"Terjadi kesalahan.",type:"error"}),(l=(a=e.response)==null?void 0:a.data)!=null&&l.errors)for(let t in e.response.data.errors)this.field[t].error=e.response.data.errors[t],this.$refs.scheduleForm.validateField(t)}).finally(()=>{this.process=!1})}})},close(){this.$emit("close")}}},S=Object.assign(D,{__name:"ScheduleForm",setup(d){return(s,e)=>{var m;const a=i("el-date-picker"),l=i("el-form-item"),t=i("el-form");return p(),b("div",C,[n("h2",Y,y((m=d.propertyModal)==null?void 0:m.title),1),n("div",v,[s.loaded?(p(),g(t,{key:0,ref:"scheduleForm","label-position":"top",model:s.form,disabled:s.process},{default:o(()=>[r(l,{class:"font-bold",label:s.field.scheduled_at.label,rules:s.field.scheduled_at.rules,error:s.field.scheduled_at.error,prop:"scheduled_at"},{default:o(()=>[r(a,{style:{width:"100%"},modelValue:s.form.scheduled_at,"onUpdate:modelValue":e[0]||(e[0]=h=>s.form.scheduled_at=h),type:"datetime",format:"DD-MM-YYYY HH:mm","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1},8,["label","rules","error"])]),_:1},8,["model","disabled"])):k("",!0)]),n("div",B,[r(f,{type:"light",onClick:s.close,disabled:s.process},{default:o(()=>e[1]||(e[1]=[c(" Batal ")])),_:1},8,["onClick","disabled"]),r(f,{type:"default",onClick:s.submit,disabled:s.process},{default:o(()=>e[2]||(e[2]=[c(" Atur jadwal ")])),_:1},8,["onClick","disabled"])])])}}});export{S as default};
